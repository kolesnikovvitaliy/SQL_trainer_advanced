## На распродаже размер скидки устанавливается в зависимости от количества экземпляров книги в магазине и от цены книги: 

* для книг в остатке не менее 5 штук скидка 50%; 
* для книг в остатке менее 5 штук скидка устанавливается в зависимости от цены: на книги не дешевле 700 руб скидка 20%, на остальные - 10%. 
* Вывести автора, название книги, количество, старая цена, скидка, цена со скидкой.  
*  Два последних столбца назвать Скидка и Цена_со_скидкой.
*  Последний столбец округлить до двух знаков после запятой.
*  Значение скидки вывести в виде строки текста (например, "15%")
*  Информацию отсортировать сначала по автору в алфавитном порядке, затем по убыванию цены книги со скидкой.

## Структура таблицы

<img align="center" alt="sumit" src="https://github.com/kolesnikovvitaliy/SQL_trainer_advanced/blob/main/1_Основы_SQL_расширенные_возможности/1_1_Простая_выборка_Склад/1_1_4_Размер_скидки_от_количества_в_магазине/img/cx_5_1.jpg">

## Ответ базы данных должен выглядеть так:

<img align="center" alt="sumit" src="https://github.com/kolesnikovvitaliy/SQL_trainer_advanced/blob/main/1_Основы_SQL_расширенные_возможности/1_1_Простая_выборка_Склад/1_1_4_Размер_скидки_от_количества_в_магазине/img/res.png">

## РЕШЕНИЕ ЗАДАЧИ:

```SQL
SELECT author, title, amount, price,
CASE
    WHEN amount >= 5 THEN '50%'
    WHEN amount < 5 
    THEN
        CASE 
            WHEN price >= 700 THEN '20%'
            ELSE '10%'
        END
END as Скидка,
CASE
    WHEN amount >= 5 THEN ROUND(price * 0.5, 2)
    WHEN amount < 5
    THEN 
        CASE 
            WHEN price >= 700 THEN ROUND(price * 0.8, 2)
            ELSE ROUND(price * 0.9, 2)
        END
END as Цена_со_скидкой
FROM book
ORDER BY author, Цена_со_скидкой DESC;
 ```